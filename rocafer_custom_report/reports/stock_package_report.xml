<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="rocafer_custom_report.report_picking_inherited"
              inherit_id="stock_picking_batch.report_picking_batch">
        <xpath expr="//div/div[3]" position="replace"/>
        <xpath expr="//div/div[2]" position="replace"/>
        <xpath expr="//div/div[2]/strong[1]" position="replace"/>
        <xpath expr="//div/div[2]/span[1]" position="replace"/>
        <xpath expr="//div/br[1]" position="replace"/>
        <xpath expr="//div/div[1]" position="replace"/>
        <xpath expr="//table[1]" position="replace"/>
        <!--Muestra los datos del cliente-->
        <xpath expr="//p" position="after">
            <t t-foreach="locations" t-as="location_from">
                <t t-set="loc_move_line" t-value="move_line_ids.filtered(lambda x: x.location_id==location_from)"/>
                <t t-foreach="loc_move_line.location_dest_id" t-as="location_dest">
                    <t t-set="move_lines"
                       t-value="loc_move_line.filtered(lambda x: x.location_dest_id==location_dest)"/>
                    <div name="outgoing_delivery_address">
                        <span>
                            <strong>Dirección de entrega:</strong>
                        </span>
                        <div t-field="move_lines.picking_partner_id"
                             t-options='{"widget": "contact", "fields": ["address", "name", "phone"], "no_marker": True, "phone_icons": True}'/>
                    </div>
                </t>
            </t>
        </xpath>
<!--        <xpath expr="//div[t-if='o.user_id']" position="replace"/>-->
        <xpath expr="//p" position="replace"/>
        <xpath expr="//thead/tr[1]/th[1]" position="replace">
            <th>Descripción</th>
        </xpath>
        <xpath expr="//thead/tr[1]/th[1]" position="before">
            <th>Artículo</th>
        </xpath>
        <xpath expr="//tbody/tr[2]/td[1]" position="replace">
            <td>
                <span t-field="move_operation.product_id.name">Product Code</span>
                <br/>
                <span>
                    Nº De orden:
                    <t t-esc="move_operation.picking_id.sale_id.client_order_ref"/>
                </span>
                <br/>
                <span>
                    Nº De pedido:
                    <t t-esc="move_operation.picking_id.sale_id.name"/>
                </span>
            </td>
        </xpath>
        <xpath expr="//tbody/tr[2]/td[1]" position="before">
            <td>
                <span t-field="move_operation.product_id.default_code">-</span>
            </td>
        </xpath>
        <xpath expr="//thead/tr[1]/th[4]" position="replace"/>
        <xpath expr="//tbody/tr[2]/td[4]" position="replace"/>
        <xpath expr="//tbody/tr[1]" position="replace"/>

    </template>
</odoo>
